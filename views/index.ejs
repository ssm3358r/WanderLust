<% layout("/layout/boilerplate.ejs")-%>

<style>
.tax-percent{
  display: none;
}
.tax-toggle{
  position: absolute;
  right: 2rem;
  border: 1px solid black;
  display: flex;
  text-align: center;
  border-radius: 2rem;
  padding: .6rem;
}

#filters{
  width: 80%;
  display: flex;
  flex-wrap: nowrap;       /* prevent wrapping */
  gap: 1rem;
  margin-bottom: 1rem;
  margin-top: 1rem;
  align-items: center;
  overflow-x: auto;        /* enable horizontal scroll */
  scrollbar-width: none;   /* hide scrollbar in Firefox */
}
#filters::-webkit-scrollbar{
  display: none;           /* hide scrollbar in Chrome/Safari */
}

.filter{
  flex: 0 0 auto;          /* don’t shrink */
  text-align: center;
  opacity: .7;
  min-width: 80px;
}
.filter:hover{
  opacity: 1;
  cursor: pointer;
}
.filter i{
  font-size: 1.2rem;
}
.filter p{
  font-size: .8rem;
}

/* ✅ Responsiveness */
@media (max-width: 768px){
  .tax-toggle{
    position: static; /* avoid breaking on small screens */
    margin-left: auto;
  }
}
</style>

<body>
  <div id="filters">

      <div class="filter">
      <div><i class="fa-solid fa-fire"></i></div>
      <p>Trending</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-bed"></i></div>
      <p>Rooms</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-mountain-city"></i></div>
      <p>Iconic cities</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-mountain"></i></div>
      <p>Mountain</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-person-swimming"></i></div>
      <p>Pools</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-campground"></i></div>
      <p>Camping</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-cow"></i></div>
      <p>Farm </p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-snowflake"></i></div>
      <p>Snow</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-person-swimming"></i></div>
      <p>Pools</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-campground"></i></div>
      <p>Camping</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-cow"></i></div>
      <p>Farm </p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-snowflake"></i></div>
      <p>Snow</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-person-swimming"></i></div>
      <p>Pools</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-campground"></i></div>
      <p>Camping</p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-cow"></i></div>
      <p>Farm </p>
    </div>
    <div class="filter">
      <div><i class="fa-solid fa-snowflake"></i></div>
      <p>Snow</p>
    </div>
   <div class="tax-toggle">
     <div class="form-check-reverse form-switch">
    <label class="form-check-label" for="flexSwitchCheckDefault">Display total after taxes</label>
  <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
</div>
   </div>
    
    
  </div>
    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1" >
 <%for(let listing of allListings){%>
  <a href="/listings/<%= listing._id %>/show" class="card-links"><div class="card listing-card col" >
  <img src="<%=listing.image.url%>" class="card-img-top" alt="listing_image" style="height: 20rem;">
  <div class="card-img-overlay"></div>
  <div class="card-body">
    <p class="card-text"> <b><%=listing.title%></b>
    <br>
    &#8377;
<%=listing.price ? listing.price.toLocaleString("en-IN") : "N/A"%>/night &nbsp; &nbsp; &nbsp;<i class="tax-percent"> +18%GST</i></p>
  </div>
</div></a>

 <%}%>

    </div>


    <script>
      document.getElementById("flexSwitchCheckDefault").addEventListener("click", ()=>{
        let taxes=document.getElementsByClassName("tax-percent")
        for(let tax of taxes){
           if(tax.style.display!=="inline")
        {
         tax.style.display="inline";
        }
        else{
          tax.style.display="none";
        }
        
        }
       
        
      });
    </script>
</body>
